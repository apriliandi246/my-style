<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="../../css-global/global.css" />
	<title>Dropdown</title>

	<style>
		body {
			padding: 100px;
		}

		/* ---------------------------- */

		.dropdown {
			position: relative;
			display: inline-block;
		}

		.dropdown__button {
			width: 100%;
			display: flex;
			align-items: center;
			padding: 0.8rem 1.4rem;
			color: var(--primary-900);
			font-size: var(--text-16x);
			background-color: var(--neutral-50);
			border: 1px solid var(--neutral-300);
		}

		.dropdown__button>svg {
			margin-left: 0.6rem;
			pointer-events: none;
		}

		.dropdown__button:disabled>svg {
			stroke: #ababab;
		}

		.dropdown__items {
			top: 0;
			display: none;
			z-index: 9999;
			margin-top: 5.5rem;
			position: absolute;
			border-radius: 4px;
			background-color: var(--neutral-50);
			border: 1px solid var(--neutral-300);
		}

		.dropdown__item {
			width: 100%;
			display: block;
			margin-bottom: 0.3rem;
			color: var(--primary-900);
			font-size: var(--text-16x);
			padding: 1rem 8rem 1rem 1.3rem;
		}

		.dropdown__item:hover {
			background-color: var(--neutral-200);
		}

		.dropdown__item:last-child {
			margin-bottom: 0;
		}

		.dropdown__item:focus,
		.dropdown__button:focus {
			outline-offset: -1px;
			outline: 2px solid var(--primary-900);
		}

		.dropdown--animate {
			animation: dropdown 140ms;
		}

		.dropdown--collapse {
			display: block;
		}

		@keyframes dropdown {
			from {
				opacity: 0;
				transform: translateY(-20px);
			}

			to {
				opacity: 1;
				transform: translateY(0);
			}
		}
	</style>
</head>

<body>
	<div class="dropdown">
		<button class="dropdown__button" id="dropdown">
			Dropdown
			<svg
				fill="none"
				width="2.4rem"
				height="2.4rem"
				stroke-width="2"
				stroke="#363a44"
				viewBox="0 0 24 24"
				stroke-linecap="round"
				stroke-linejoin="round"
				xmlns="http://www.w3.org/2000/svg">
				<polyline points="6 9 12 15 18 9"></polyline>
			</svg>
		</button>

		<div class="dropdown__items dropdown--animate">
			<a href="#" class="dropdown__item">Home</a>
			<a href="#" class="dropdown__item">About</a>
			<a href="#" class="dropdown__item">Partner</a>
			<a href="#" class="dropdown__item">Register</a>
		</div>
	</div>

	<br><br><br><br>
	<br><br><br><br>

	<script type="module">
		"use strict";

		import { listener } from "../../js/utils/dom.js";

		class Dropdown {
			constructor() {
				this.dropdownButton = document.getElementById("dropdown");
				this.dropdownMenus = this.dropdownButton.nextElementSibling;

				this.addEventListener();
			}

			addEventListener() {
				listener(document.body, "click", this.clickOutside);
				listener(this.dropdownMenus, "keydown", this.escapePress);
				listener(this.dropdownButton, "keydown", this.escapePress);
				listener(this.dropdownButton, "click", this.toggleDropdownMenus);
			}

			toggleDropdownMenus = () => {
				this.dropdownMenus.classList.toggle("dropdown--collapse");
			}

			clickOutside = (event) => {
				const dropdownMenusStatus = this.dropdownMenus.classList.contains("dropdown--collapse");

				if (dropdownMenusStatus) {
					const dropdownParentElement = this.dropdownButton.parentElement;

					if (!dropdownParentElement.contains(event.target)) {
						this.toggleDropdownMenus();
					}
				}
			}

			escapePress = (event) => {
				const dropdownMenusStatus = this.dropdownMenus.classList.contains("dropdown--collapse");

				if (event.keyCode === 27 && dropdownMenusStatus) {
					this.toggleDropdownMenus();
				}
			}
		}

		new Dropdown();
	</script>
</body>

</html>
