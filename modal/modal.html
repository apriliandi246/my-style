<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="preconnect" href="https://fonts.googleapis.com" />
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
	<link
		href="https://fonts.googleapis.com/css2?family=Poppins&display=swap"
		rel="stylesheet" />
	<link rel="stylesheet" href="../../css-global/global.css" />
	<title>Modal</title>

	<style>
		body {
			padding: 100px;
		}

		/* ---------------------------- */

		.modal {
			top: 25%;
			left: 25%;
			z-index: 3;
			width: 50%;
			padding: 20px;
			display: none;
			position: fixed;
			margin-left: auto;
			border-radius: 4px;
			margin-right: auto;
			background-color: var(--neutral-50);
		}

		.modal-overlay {
			top: 0;
			left: 0;
			z-index: 2;
			width: 100%;
			height: 100%;
			display: none;
			position: fixed;
			background-color: rgba(0, 0, 0, 0.5);
		}

		.active-modal {
			display: block;
		}

		.modal-animation {
			animation: modal 240ms;
		}

		.modal-overlay-animation {
			animation: modalWrapper 230ms;
		}

		@keyframes modal {
			from {
				transform: scale(0.7);
			}

			to {
				transform: scale(1);
			}
		}

		@keyframes modalWrapper {
			from {
				opacity: 0;
			}

			to {
				opacity: 1;
			}
		}
	</style>
</head>

<body>
	<button id="show-modal-btn">Show Modal</button>

	<div id="modal" class="modal modal-animation">
		<p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Tenetur corrupti voluptatum magnam ratione autem
			commodi esse eaque officiis nihil ut mollitia illo laboriosam, perspiciatis exercitationem nostrum!
			Exercitationem, facere odio quos fugit, eveniet quibusdam earum facilis atque dolores repellat nam voluptas
			iure? Sit, magnam! Ut id non at in quo natus est aspernatur ullam nobis soluta, doloremque repellendus
			asperiores consequuntur molestiae reiciendis! Quaerat eaque ducimus voluptate illo itaque, dolores quasi
			doloremque, necessitatibus, deleniti quia suscipit voluptatibus laudantium unde libero! Suscipit placeat et
			aperiam cum quisquam ratione eveniet, tenetur qui dolores. Eveniet alias aliquid, reiciendis quisquam vero
			consectetur culpa blanditiis eius sed!.</p>
	</div>

	<div id="modal-overlay" class="modal-overlay modal-overlay-animation"></div>

	<script type="module">
		"use strict";

		import { listener, self } from "../../js/utils/dom.js";

		class Modal {
			constructor() {
				this.modal = document.getElementById("modal");
				this.modalOverlay = document.getElementById("modal-overlay");
				this.modalTriggerButton = document.getElementById("show-modal-btn");

				this.addEventListener();
			}

			addEventListener() {
				listener(this.modal, "keydown", this.escapePress);
				listener(this.modalOverlay, "click", this.toggleModal);
				listener(this.modalTriggerButton, "click", this.toggleModal);
			}

			toggleModal = () => {
				this.modal.classList.toggle("active-modal");
				this.modalOverlay.classList.toggle("active-modal");
			}

			escapePress = (event) => {
				if (event.keyCode === 27) {
					const modalStatus = this.modalOverlay.classList.contains("active-modal");

					if (modalStatus) {
						this.toggleModal();
					}
				}
			}
		}

		new Modal();
	</script>
</body>

</html>
